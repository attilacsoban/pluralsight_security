<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns:beans="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:p="http://www.springframework.org/schema/p"
	xmlns="http://www.springframework.org/schema/security"
	xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.2.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd">
	
	<!-- megprobalom rest-el osszehozni, pl a rest requestmapping jara belovom a patternt, es meglatom mi lesz
	ha fel akarja keresni egy angularos kliens azt a linket...
	ezutan security with rest kene + sseecuritssy with angular vagy hasonlo, hogy hogy muxik egy
	rest servicessel ez a methods szintu akarmi, hol, hogy tarolja a bejelentkezett usert a kliens?
-->
	
	<!--================= minimal config +  static in memory authentication ===================-->
<!-- 	<http auto-config="true"> -->
<!-- 		<intercept-url pattern="/**" access="ROLE_USER" /> -->
<!-- 	</http> -->
<!-- 	<authentication-manager> -->
<!-- 		<authentication-provider> -->
<!-- 			<user-service> -->
<!-- 				<user name="attila" password="attila" authorities="ROLE_USER"/> -->
<!-- 				<user name="tibi" password="secret" authorities="ROLE_USER"/> -->
<!-- 			</user-service> -->
<!-- 		</authentication-provider> -->
<!-- 	</authentication-manager> -->


	
	<!--================== storage authentication version 1. =======================-->
<!-- 	<http auto-config="true">  -->
<!-- 		<intercept-url pattern="/**" access="ROLE_USER" />  -->
<!-- 	</http>   -->
<!--  	<authentication-manager> -->
<!--  		<authentication-provider user-service-ref="userDetailsService"/>			 -->
<!-- 	</authentication-manager> -->
	<!-- for jdbc connect -->
<!-- 	<beans:bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"> -->
<!-- 		<beans:property name="driverClassName" value="com.mysql.jdbc.Driver" /> -->
<!-- 		<beans:property name="url" value="jdbc:mysql://localhost:3306/fitnesstracker" /> -->
<!-- 		<beans:property name="username" value="root" /> -->
<!-- 		<beans:property name="password" value="csoki" /> -->
<!-- 	</beans:bean> -->
<!-- 	<beans:bean id="userDetailsService" class="org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl">  -->
<!--  		<beans:property name="dataSource" ref="dataSource"/>  -->
<!-- 	</beans:bean>  -->
	
	
	
	
	<!--================== storage authentication version 2. =======================-->
<!-- 	<http auto-config="true">   -->
<!--  		<intercept-url pattern="/**" access="ROLE_USER" />   -->
<!--  	</http>    -->
<!-- 	<authentication-manager> -->
<!-- 		<authentication-provider> -->
<!-- 		<password-encoder hash="bcrypt" /> -->
<!-- 			<jdbc-user-service data-source-ref="dataSource"/> -->
<!-- 		</authentication-provider> -->
<!-- 	</authentication-manager> -->
<!-- 	<beans:bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"> -->
<!-- 		<beans:property name="driverClassName" value="com.mysql.jdbc.Driver" /> -->
<!-- 		<beans:property name="url" value="jdbc:mysql://localhost:3306/fitnesstracker" /> -->
<!-- 		<beans:property name="username" value="root" /> -->
<!-- 		<beans:property name="password" value="csoki" /> -->
<!-- 	</beans:bean> -->
	
	<!--================== password storage MD5 =======================-->
<!-- 	<authentication-manager> -->
<!-- 		<authentication-provider> -->
<!-- 		<password-encoder hash="md5" /> -->
<!-- 			<jdbc-user-service data-source-ref="dataSource"/> -->
<!-- 		</authentication-provider> -->
<!-- 	</authentication-manager> -->
	
	<!--================== password storage BCrypt =======================-->
<!-- 	<authentication-manager> -->
<!-- 		<authentication-provider> -->
<!-- 		<password-encoder hash="bcrypt" /> -->
<!-- 			<jdbc-user-service data-source-ref="dataSource"/> -->
<!-- 		</authentication-provider> -->
<!-- 	</authentication-manager> -->
	
	<!--================== BASIC AUTHENTICATION =======================
	use basic authentication this will use our datasource and bcrypt config  -->
<!-- 	<http auto-config="true"> -->
<!-- 		<intercept-url pattern="/**" access="ROLE_USER" /> -->
<!-- 		<http-basic/>  -->
<!-- 	</http> -->
	
	<!--==================custom login form ======================= 
	.html mondja meg h spring mvc-n keresztul akarom iranyitani
		web.xml servletdispatcher mappingja miatt		
		-->	
<!-- 	<http auto-config="true"> -->
<!-- <intercept-url pattern="/login.html" access="IS_AUTHENTICATED_ANONYMOUSLY"/>allow acces to login.html -->
<!-- 		<intercept-url pattern="/**" access="ROLE_USER" /> -->
<!-- 		<form-login login-page="/login.html"/> -->		
<!-- 	</http> -->
		
		<!--==================custom login form ======================= 
		autentikacio fail eseten uzenet megjelenitese , mas oldalra iranyitas esetleg
		-->
<!-- 		<http auto-config="true"> -->
<!-- 			<intercept-url pattern="/login.html" access="IS_AUTHENTICATED_ANONYMOUSLY"/> -->
<!-- 			<intercept-url pattern="/loginFailed.html" access="IS_AUTHENTICATED_ANONYMOUSLY"/> -->
<!-- 			<intercept-url pattern="/**" access="ROLE_USER" />				 -->
<!-- 			<form-login login-page="/login.html" authentication-failure-url="/loginFailed.html"/> 		 -->
<!-- 		</http> -->
		
		
		<!--==================custom login form ======================= 
		logout funkcio hozzaadasa logout element-el majd ra egy intercept-url madj a logincontroller
		-->
<!-- 		<http auto-config="true"> -->
<!-- 			<intercept-url pattern="/login.html" access="IS_AUTHENTICATED_ANONYMOUSLY"/> -->
<!-- 			<intercept-url pattern="/loginFailed.html" access="IS_AUTHENTICATED_ANONYMOUSLY"/> -->
<!-- 			<intercept-url pattern="/logout.html" access="IS_AUTHENTICATED_ANONYMOUSLY"/> -->
<!-- 			<intercept-url pattern="/**" access="ROLE_USER" />				 -->
<!-- 			<form-login login-page="/login.html" authentication-failure-url="/loginFailed.html"/> 	 -->
<!-- 			<logout logout-success-url="/logout.html" />	 -->
<!-- 		</http> -->
		
		<!--==================custom login form ======================= 
		403 unauthorized access page creation with acces-denied-handler attribute with 403.jsp and logincontroller
		+intercept-url is needed too-->
<!-- 		<http auto-config="true"> -->
<!-- 			<intercept-url pattern="/login.html" access="IS_AUTHENTICATED_ANONYMOUSLY"/> -->
<!-- 			<intercept-url pattern="/loginFailed.html" access="IS_AUTHENTICATED_ANONYMOUSLY"/> -->
<!-- 			<intercept-url pattern="/logout.html" access="IS_AUTHENTICATED_ANONYMOUSLY"/> -->
<!-- 			<intercept-url pattern="/403.html" access="IS_AUTHENTICATED_ANONYMOUSLY"/> -->
<!-- 			<intercept-url pattern="/**" access="ROLE_USER" />				 -->
<!-- 			<form-login login-page="/login.html" authentication-failure-url="/loginFailed.html"/> 	 -->
<!-- 			<logout logout-success-url="/logout.html" /> -->
<!-- 			<access-denied-handler error-page="/403.html"/>	 -->
<!-- 		</http> -->
					
		<!--==================custom login form ======================= 
		using expressions
		-->			
<!-- 		<http auto-config="true" use-expressions="true"> -->
<!-- 			<intercept-url pattern="/login.html" access="permitAll"/> -->
<!-- 			<intercept-url pattern="/loginFailed.html" access="permitAll"/> -->
<!-- 			<intercept-url pattern="/logout.html" access="permitAll"/> -->
<!-- 			<intercept-url pattern="/403.html" access="permitAll"/> -->
<!-- 			<intercept-url pattern="/**" access="hasRole('ROLE_USER')" />				 -->
<!-- 			<form-login login-page="/login.html" authentication-failure-url="/loginFailed.html"/> 	 -->
<!-- 			<logout logout-success-url="/logout.html" /> -->
<!-- 			<access-denied-handler error-page="/403.html"/>	 -->
<!-- 		</http> -->
		 
				
					
	<http auto-config="true" use-expressions="true">
		<intercept-url pattern="/login.html" access="permitAll"/>
		<intercept-url pattern="/loginFailed.html" access="permitAll"/>
		<intercept-url pattern="/logout.html" access="permitAll"/>
		<intercept-url pattern="/403.html" access="permitAll"/>
		<intercept-url pattern="/**" access="hasRole('ROLE_USER')" />				
		<form-login login-page="/login.html" authentication-failure-url="/loginFailed.html"/> 	
		<logout logout-success-url="/logout.html" />
		<access-denied-handler error-page="/403.html"/>			
	</http>
		 
	<beans:bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
		<beans:property name="driverClassName" value="com.mysql.jdbc.Driver" />
		<beans:property name="url" value="jdbc:mysql://localhost:3306/fitnesstracker" />
		<beans:property name="username" value="root" />
		<beans:property name="password" value="csoki" />
	</beans:bean>	
	
	<authentication-manager>
		<authentication-provider>
		<password-encoder hash="bcrypt" />
			<jdbc-user-service data-source-ref="dataSource"/>
		</authentication-provider>
	</authentication-manager>
	
	
	
	
	
	
</beans:beans>
